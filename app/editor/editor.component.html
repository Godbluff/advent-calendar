<div class="editorbg">
    <div class="calendar-header">Calendar Editor<div class="calendar-border"></div></div>
    <div class="link">
        <div [routerLink]="['/']" class="glyphicon glyphicon-home icon-link"></div>
    </div>


    <div class="col-md-5" style="text-align: center;">
        <div class="col-md-12">
        <input class="edit-input" placeholder="Company name" [(ngModel)]="editorService.calendar.companyName"
               popover="The Heading on the calendar will be 'The <company name> Advent Calendar'."
               popoverPlacement="bottom"
               [popoverOnHover]="true"
               [popoverAnimation]="true"/>
        <input class="edit-input" placeholder="Calendar Background Url" [(ngModel)]="editorService.calendar.bgUrl"
               popover="If you do not wich to use the default background, enter a valid URL for another image and it will be used instead."
               popoverPlacement="bottom"
               [popoverOnHover]="true"
               [popoverAnimation]="true">
        </div>
        <div class="col-md-12">
            <input class="edit-input" placeholder="Company Logo URL"[(ngModel)]="editorService.calendar.logoUrl"
                   popover="To add the logo of your company to the calendar, paste in a URL to the image here."
                   popoverPlacement="bottom"
                   [popoverOnHover]="true"
                   [popoverAnimation]="true"/>
            <input class="edit-input" placeholder="administrator e-mail" [(ngModel)]="editorService.calendar.contactEmail"
                   popover="Insert e-mail for password retrieval."
                   popoverPlacement="bottom"
                   [popoverOnHover]="true"
                   [popoverAnimation]="true">
            <input class="edit-input" placeholder="Winners Per Day" value="1" [(ngModel)]="editorService.calendar.winnersPerDay"
                   popover="If you have more than one winner per day, insert the number here. This is added to all doors."
                   popoverPlacement="bottom"
                   [popoverOnHover]="true"
                   [popoverAnimation]="true"/>
        </div>
        <div class="col-md-12">
            <div class="btn btn-success col-sm-6" style="width:44%; margin-right: 3%; margin-left: 3%;  margin-top: 20px;" (click)="editorService.updateFullCalendar()">Update Calendar</div>
            <div class="{{editorService.calendar.doorsAlwaysAvailable ? 'btn btn-success col-sm-6' : 'btn btn-danger col-sm-6'}}"
                 style="width:44%; margin-right: 3%; margin-left: 3%; margin-top: 20px;"
                 (click)="editorService.unlockCalendar()"
                 popover="Toggle participants ability to see open calendar doors before december 1st. This is a testing function."
                 popoverPlacement="bottom"
                 [popoverOnHover]="true"
                 [popoverAnimation]="true">{{editorService.calendar.doorsAlwaysAvailable ? 'Doors Unlocked' : 'Doors Locked'}}</div>
            <div [routerLink]="['/']" fragment="top" class="btn btn-success col-sm-6" style="width:44%; margin-right: 3%; margin-left: 3%; margin-top: 20px;"
                 popover="This will freeze the calendar and bring you back to the front page. You can log back in to edit later."
                 popoverPlacement="bottom"
                 [popoverOnHover]="true"
                 [popoverAnimation]="true"
                 (click)="editorService.updateFullCalendar()">End Editing</div>
            <div class="btn btn-danger col-sm-6" style="width:44%; margin-right: 3%; margin-left: 3%; margin-top: 20px;" (click)="editorService.logCalendar()"
            >console.log the calenedar</div>
        </div>
        <div class="col-md-12">
            <div style="font-size: 18px; margin-top: 20px;">Participiants</div>
            <input class="edit-input" placeholder="Add participant" [(ngModel)]="newParticipant" (keyup.enter)="addParticipant(newParticipant)"
               popover="Add the name of a new paticipant. All participants use the calendar name and the participant name in order to access their version of the calendar."
               popoverPlacement="bottom"
               [popoverOnHover]="true"
               [popoverAnimation]="true"/>
            <div style="color: yellow; font-style: italic; width: 100%; margin-bottom: -5px;
font-size: 12px;">Hit enter to add.</div>
        </div>
        <div class="col-md-12 participants-container">

            <div *ngFor="let person of editorService.calendar.participants; let i = index" class="btn btn-default" style="min-width: 120px; text-align: left; margin-right: 2px; margin-bottom: 3px;">{{person.name}}<div
                    (click)="removeParticipant(i)" style="margin-left: 10px;"
                    class="glyphicon glyphicon-remove"
                    style="float: right; line-height: 18px; color: red; cursor: pointer;"
                    popover="Remove participant."
                    popoverPlacement="top"
                    [popoverOnHover]="true"
                    [popoverAnimation]="true"></div></div>
            <div style="font-style: italic; color: yellow; margin-top: 10px; margin-bottom: -10px;">All participants log in by using the comany name of the calendar and the participant name as is it typed in this list.<br/>Once the calendar is initiated on the 1st of December, participants can no longer be edited.</div>
        </div>
    </div>
    <div class="col-md-7">
        <div class="col-md-12" style="text-align: center;">
            <div *ngFor="let door of editorService.calendar.doors; let i = index" (click)="showDoorData(i)" [class.selected]="highlightStatus[i]" class="door-select">{{i+1}}</div>
            <div style="font-style: italic; color: yellow; margin-top: 10px; margin-bottom: -10px;">Select a calendar entry to edit it.</div>

        </div>
        <div class="door-edit-container col-md-12">
            <div style="font-size: 18px;">Edit Door Number: {{selectedDoor.number}}</div>
            <div class="col-md-12">
                <input  class="edit-input" placeholder="The Prize" [(ngModel)]="selectedDoor.prize" (keyup)="updateEntry('prize')" (blur)="doorCheck()"
                    popover="Enter the prize to be handed out on December {{selectedDoor.number}}."
                    popoverPlacement="bottom"
                    [popoverOnHover]="true"
                    [popoverAnimation]="true"/>
                <input class="edit-input" placeholder="A Memorable Quote." [(ngModel)]="selectedDoor.quote" (keyup)="updateEntry('quote')"
                   popover="Insert a short quote if you want."
                   popoverPlacement="bottom"
                   [popoverOnHover]="true"
                   [popoverAnimation]="true"/>
                <input class="edit-input" placeholder="Instructions: 'Pick up prize at...'" [(ngModel)]="selectedDoor.instructions" (keyup)="updateEntry('instructions')"
                   popover="Tell your winning participants how to pick up their prize."
                   popoverPlacement="bottom"
                   [popoverOnHover]="true"
                   [popoverAnimation]="true"/>
                <input class="edit-input" placeholder="Prize Image - Optional" [(ngModel)]="selectedDoor.imageUrl" (keyup)="updateEntry('imageUrl')" (keyup.enter)="enterToTab()"
                       popover="Optional image URL for the prize on December {{selectedDoor.number}}. If nothing is entered, the default image is used."
                       popoverPlacement="bottom"
                       [popoverOnHover]="true"
                       [popoverAnimation]="true"/>
            </div>
            <div class="col-md-6">
                <img  *ngIf="selectedDoor.imageUrl && this.selectedDoor.imageUrl.length >= 16" [src]="selectedDoor.imageUrl" style="max-width: 100%; max-height: 200px; float: right;"/>
            </div>
            <div class="col-md-6">
                <div style="width: 100%; text-align: center; margin-top: 20px;">Preview Door</div>
                <div class="door-container" style="top: 0px; float: right; margin: 10px; margin-right: 15px;" onClick="" id="{{containerId}}">
                    <div style="cursor: pointer;">
                        <div style="position:absolute; height: 100%; width: 100%; mix-blend-mode: color-dodge;overflow: hidden; cursor: pointer;" [ngStyle]="{ 'opacity': doorOpen ? 1 : 0}">
                            <img class="image" src="https://www.jukeboxprint.com/images/3d-embossed-black-business-card.jpg" (click)="test.open(selectedDoor.imageUrl, userWin, small, selectedDoor.prize, selectedDoor.number, selectedDoor.instructions)"/>
                        </div>
                    </div>
                    <div class="cardshade-container">
                        <div class="{{doorOpen ? 'cardshade cardshade-open': 'cardshade'}}"></div>
                    </div>
                    <div (click)="toggleDoor()"  class="{{doorOpen ? 'card card-open' : 'card'}}" style="position: absolute;">
                        <div class="face front" id="front" [style.backgroundPosition]="bgPos">
                            {{selectedDoor.number}}
                            <div class="timer" id="loader-{{selectedDoor.number}}" [style.display]="loaderVisible"></div>
                        </div>
                        <div class="face back"><p>{{selectedDoor.quote}}</p></div>
                    </div>
                </div>
                <div style="clear: both;width: 100%; text-align: center; margin-top: 10px; color: yellow; font-style: italic;">
                    {{doorOpen ? 'Click door to close, or inside box to open content.': 'Click door to open'}}</div>
            </div>
            <div class="col-md-12" style="font-style: italic; color: yellow; margin-top: 10px; margin-bottom: 0px;">This box saves everything, always.</div>

        </div>

    </div>
<cc-modal #test></cc-modal>
</div>